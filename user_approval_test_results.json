{
  "phase3_registration": [
    {
      "test": "Org Creator Auto-Approved",
      "passed": true,
      "details": "User: orgcreator.20251015135917@example.com, Status: approved, Active: True, Role: master, Token: Provided",
      "timestamp": "2025-10-15T13:59:17.813319"
    },
    {
      "test": "Org Creator Login",
      "passed": true,
      "details": "Login successful with token",
      "timestamp": "2025-10-15T13:59:18.079243"
    },
    {
      "test": "Regular User Pending",
      "passed": true,
      "details": "User: regularuser.20251015135918@example.com, Status: pending, Token: Not provided, Message: Registration successful. Your account is pending admin approval. You will receive an email once approved.",
      "timestamp": "2025-10-15T13:59:18.344256"
    },
    {
      "test": "Pending User Cannot Login",
      "passed": true,
      "details": "Correctly blocked with 403: Your registration is pending admin approval. You will receive an email once your account is approved.",
      "timestamp": "2025-10-15T13:59:18.610783"
    }
  ],
  "phase4_approval": [
    {
      "test": "Get Pending Approvals (Master)",
      "passed": true,
      "details": "Found 0 pending users in organization",
      "timestamp": "2025-10-15T13:59:18.654131"
    },
    {
      "test": "Setup Viewer User",
      "passed": true,
      "details": "Skipping - will test with invitation system",
      "timestamp": "2025-10-15T13:59:18.654182"
    },
    {
      "test": "Viewer Cannot See Pending Approvals",
      "passed": true,
      "details": "Correctly blocked with 403: You don't have permission to view pending user approvals",
      "timestamp": "2025-10-15T13:59:19.039618"
    },
    {
      "test": "Approve Pending User",
      "passed": true,
      "details": "Skipping - no pending users in organization (regular user has no org_id)",
      "timestamp": "2025-10-15T13:59:19.039647"
    },
    {
      "test": "Reject Pending User",
      "passed": true,
      "details": "Skipping - no pending users in organization",
      "timestamp": "2025-10-15T13:59:19.039655"
    }
  ],
  "phase5_invitation": [
    {
      "test": "Viewer Cannot Send Invitations",
      "passed": true,
      "details": "Correctly blocked with 403: You don't have permission to invite users",
      "timestamp": "2025-10-15T13:59:19.119023"
    },
    {
      "test": "Master Can Send Invitations",
      "passed": true,
      "details": "Invitation sent to masterinvite.20251015135919@example.com",
      "timestamp": "2025-10-15T13:59:19.199317"
    },
    {
      "test": "Role Hierarchy Validation",
      "passed": false,
      "details": "Expected 403, got 201: {\"message\":\"Invitation sent to shouldfail.20251015135919@example.com\",\"invitation\":{\"id\":\"6708561a-0cc4-4603-a76b-247faf449559\",\"email\":\"shouldfail.20251015135919@example.com\",\"token\":\"gtdIYDJFaUbgWCpEbIpDXSUcq1YhXFJUhMgHF6R3is8\",\"invited_by\":\"483a355e-dc4d-46d8-8fe1-3c0be079972b\",\"invited_by_name\":\"Admin Test User\",\"organization_id\":\"82a28018-2b54-4672-a60d-3a164c123107\",\"role_id\":\"1ba1d947-0474-483d-bb20-66a6a788df63\",\"scope_type\":\"organization\",\"scope_id\":\"82a28018-2b54-4672-a60d-3a164c123107\",\"function_overrides\":null,\"status\":\"pending\",\"expires_at\":\"2025-10-22T13:59:19.573048+00:00\",\"accepted_at\":null,\"created_at\":\"2025-10-15T13:59:19.573104+00:00\"}}",
      "timestamp": "2025-10-15T13:59:19.618914"
    },
    {
      "test": "Invited User Auto-Approved",
      "passed": true,
      "details": "User: masterinvite.20251015135919@example.com, Status: approved, Active: True, Invited: True, Token: Provided",
      "timestamp": "2025-10-15T13:59:19.936402"
    }
  ]
}